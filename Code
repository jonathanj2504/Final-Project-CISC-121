import gradio as gr

guests = []  

room_prices = {
    "Single Room": 120,
    "Double Room": 180,
    "Suite": 300,
}

def check_in(name, room_type, nights):
    try:
        nights = int(nights)
    except:
        return " Nights have to be a number :( "

    cost_per_night = room_prices[room_type]
    total = cost_per_night * nights

    guest_info = {
        "name": name.lower(),
        "room": room_type,
        "nights": nights,
        "total": total,
    }

    guests.append(guest_info)

    return (
        f" Guest Checked In!\n"
        f"Name: {name}\n"
        f"Room Type: {room_type}\n"
        f"Nights: {nights}\n"
        f"Total Bill: ${total}"
    )

def search_guest(name_search):
    name_search = name_search.lower()

    for guest in guests:
        if guest["name"] == name_search:
            return (
                f" Guest Found!\n"
                f"Name: {guest['name'].title()}\n"
                f"Room Type: {guest['room']}\n"
                f"Nights Stayed: {guest['nights']}\n"
                f"Total Bill: ${guest['total']}"
            )

    return " Guest not found."

with gr.Blocks(title="Hotel Guest Check-In System") as demo:
    gr.Markdown("<h1 style='text-align:center;'> Hotel Guest Check-In System</h1>")

    with gr.Tab("Check-In Guest"):
        name = gr.Textbox(label="Guest Name")
        room = gr.Dropdown(label="Room Type", choices=["Single Room", "Double Room", "Suite"], value="Single Room")
        nights = gr.Number(label="Number of Nights", value=1)
        checkin_btn = gr.Button("Check In", scale=0)
        checkin_output = gr.Textbox(label="Check-In Details", lines=5)
        checkin_btn.click(check_in, inputs=[name, room, nights], outputs=checkin_output)

    with gr.Tab("Search Guest"):
        name_search = gr.Textbox(label="Search by Guest Name")
        search_btn = gr.Button("Search")
        search_output = gr.Textbox(label="Search Results", lines=6)
        search_btn.click(search_guest, inputs=name_search, outputs=search_output)

demo.launch()
